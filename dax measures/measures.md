# Manage Any Hotel â€“ DAX Measures

Below is the full catalogue of measures used in the report, grouped exactly as in your model view. Each measure is commented so you (or a reviewer) can see why it exists and how itâ€™s calculated.  Copyâ€“paste directly into your PBIX or Tabular Editor.

---

### ðŸ“¦ `_primary_KPIs`

```DAX
-- Core business metrics ---------------------------------------------------
TotalÂ Bookings :=
    COUNTROWS ( hotel_booking )

BookingsÂ Cancelled :=
    CALCULATE ( [TotalÂ Bookings], hotel_booking[is_canceled] = 1 )

BookingÂ CancellationÂ % :=
    DIVIDE ( [BookingsÂ Cancelled], [TotalÂ Bookings] )

AverageÂ DailyÂ RateÂ (ADR) :=
    AVERAGE ( hotel_booking[adr] )

AverageÂ LeadÂ TimeÂ (days) :=
    AVERAGE ( hotel_booking[lead_time] )

RevenueÂ PerÂ Booking :=              -- helper for revenue calculations
    SUMX ( hotel_booking,
        hotel_booking[adr]
      * ( hotel_booking[stays_in_weekend_nights] + hotel_booking[stays_in_week_nights] )
    )

TotalÂ Revenue :=
    CALCULATE ( [RevenueÂ PerÂ Booking], hotel_booking[is_canceled] = 0 )

RevenueÂ Loss :=
    CALCULATE ( [RevenueÂ PerÂ Booking], hotel_booking[is_canceled] = 1 )
```

---

### ðŸ“¦ `_previous_year_KPIs`

```DAX
-- Same metrics, shifted one year back for YoY calcs -----------------------
Total Bookings PY :=
    CALCULATE ( [Total Bookings], SAMEPERIODLASTYEAR ( 'Date'[Date] ) )

RevenueÂ PY :=
    CALCULATE ( [TotalÂ Revenue], SAMEPERIODLASTYEAR ( 'Date'[Date] ) )

RevenueÂ LossÂ PY :=
    CALCULATE ( [RevenueÂ Loss], SAMEPERIODLASTYEAR ( 'Date'[Date] ) )

AverageÂ ADRÂ PY :=
    CALCULATE ( [AverageÂ DailyÂ RateÂ (ADR)], SAMEPERIODLASTYEAR ( 'Date'[Date] ) )

AverageÂ LeadÂ TimeÂ PY :=
    CALCULATE ( [AverageÂ LeadÂ TimeÂ (days)], SAMEPERIODLASTYEAR ( 'Date'[Date] ) )

BookingsÂ CancelledÂ PY :=
    CALCULATE ( [BookingsÂ Cancelled], SAMEPERIODLASTYEAR ( 'Date'[Date] ) )
```

---

### ðŸ“¦Â `~YoYÂ measures`

```DAX
-- Yearâ€‘onâ€‘Year % change ----------------------------------------------------
BookingsÂ YoYÂ % :=
    DIVIDE ( [TotalÂ Bookings] - [TotalÂ BookingsÂ PY], [TotalÂ BookingsÂ PY] )

RevenueÂ YoYÂ % :=
    DIVIDE ( [TotalÂ Revenue] - [RevenueÂ PY], [RevenueÂ PY] )

RevenueÂ LossÂ YoYÂ % :=
    DIVIDE ( [RevenueÂ Loss] - [RevenueÂ LossÂ PY], [RevenueÂ LossÂ PY] )

ADRÂ YoYÂ % :=
    DIVIDE ( [AverageÂ DailyÂ RateÂ (ADR)] - [AverageÂ ADRÂ PY], [AverageÂ ADRÂ PY] )

Leadâ€‘TimeÂ YoYÂ % :=
    DIVIDE ( [AverageÂ LeadÂ TimeÂ (days)] - [AverageÂ LeadÂ TimeÂ PY], [AverageÂ LeadÂ TimeÂ PY] )

CancelledÂ YoYÂ % :=
    DIVIDE ( [BookingsÂ Cancelled] - [BookingsÂ CancelledÂ PY], [BookingsÂ CancelledÂ PY] )
```

---

### ðŸ“¦Â `_value_labels` Â *(referenceâ€‘label arrows)*

```DAX
-- Arrow + % label shown underneath KPI cards ------------------------------
BookingsÂ YoYÂ Label :=
VAR pct = [BookingsÂ YoYÂ %]
RETURN IF ( ISBLANK(pct), "â€“",
    IF ( pct >= 0,
        UNICHAR(9650) & " " & FORMAT(pct, "0.0%"),   -- â–²
        UNICHAR(9660) & " " & FORMAT(ABS(pct),"0.0%") -- â–¼
    )
)

-- Repeat pattern for Revenue, RevenueÂ Loss, ADR, LeadÂ Time, Cancelled
ADRÂ YoYÂ Label := /* same structure using [ADRÂ YoYÂ %] */
RevenueÂ YoYÂ Label := /* â€¦ */
RevenueÂ LossÂ YoYÂ Label := /* â€¦ */
LeadÂ TimeÂ YoYÂ Label := /* â€¦ */
CancelledÂ YoYÂ Label := /* â€¦ */
```

---

### ðŸ“¦Â `_secondary_KPIs`

```DAX
-- Cumulative / YTD metrics shown in secondary cards -----------------------
BookingsÂ YTD :=
    TOTALYTD ( [TotalÂ Bookings], 'Date'[Date] )

RevenueÂ YTD :=
    TOTALYTD ( [TotalÂ Revenue], 'Date'[Date] )

RevenueÂ PerÂ BookingÂ (Avg) :=
    AVERAGE ( hotel_booking[adr]
        * ( hotel_booking[stays_in_weekend_nights] + hotel_booking[stays_in_week_nights] )
    )
```

---

### ðŸ“¦Â `MetricÂ SelectorÂ forÂ analysis`

```DAX
-- Fieldâ€‘parameter table autoâ€‘generated by Power BI ------------------------
-- Table columns: Metric (label), SelectedÂ Metric (measure reference)
-- No manual code required here; manage via Modeling â–º New Parameter â–º Fields.
```

> **Note**: All YoY & PY measures rely on a proper `Date` table marked as aÂ **Date Table** and linked via `hotel_booking[BookingÂ Date]`.
> **Best practice**: hide helper columns and unused tables so the fields pane stays clean for endâ€‘users.
